##黑马苍穹外卖仿写
————2024.2.29

---
###日志
###### 2.29 阅读已有代码以及数据库表的关系

首先在application-dev中修改连接数据库的用户名密码

其使用了一个配置文件"分割"【多环境配置】

###### 3.1

IDEA的TODO使用、已有代码进行基础了解，数据库表过于抽象

Swagger基本了解 简单密码比对加密

###### 3.2

Swagger 注解了解【只有pojo之中有依赖包】，解决请求头无令牌问题【全局配置中可进行添加】

新增员工：传入数据前端、数据库都进行值的验证，前端传递的值DTO与后端存储的表对象Entry进行分离，
其中有大量相同属性【一样命名】使用BeanUtils进行克隆值，其余就是常量及时间， 还有两个获取的id【以下方法】

问题：
1、获取的id：JWT令牌的荷载读取，引入新技术JDK中的ThreadLocal，可进行**单一线程的值共享**，common中context进行封装
2、用户名唯一问题：通过全局异常处理器处理【异常处理器均为重载】，对异常进行分析，是否为SQL用户名唯一异常，优点：**完善了未知异常【非自定义】的处理**
2.5【大概?】、在新增用户之前进行一次用户名查询【已有SQL】，有异常将其进行抛出，优点：增加了自定义的异常处理面

员工分页查询：经典的分页插件加条件查询【动态SQL:where、if】，Swagger返回值没依赖无法进行参数说明【可自行添加】
讲解分页插件的底层也使用了ThreadLocal进行初始配置时的传值

问题：
1、返回中时间为数组格式：
两种做法，
第一种，在**真实返回值内部属性**中添加@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")进行格式转换
第二种，进行消息转换器【已进行封装【按固定格式来记】】的添加【包含特异性，但只需配置一次】，做法：
配置类添加方法【按固定格式来记】，创建消息转换器容器然后添加自己的消息转换器，并且设置索引【广义优先级】

###### 3.3 分页查询问题解决
员工禁用与启用：经典根据id进行修改，扩大其SQL语句的复用性，使用动态SQL进行全属性的判断以及顺便的des排序

lombok新注解@Builder 可进行静态链式创建，头.builder()、中部直接给值非set()、尾.build();

编辑员工:1.分为两步id查询进行回显、2.修改数据进行存储

1、根据id进行查找【查询其返回响应不需要泛形】，路径参数，传入id，进行查询
【对表进行查询，其返回时一定是表的Entry对象】，可以在业务层对其进行隐藏部分属性【此处，我将其转化为DTO对象】

2、修改数据进行存储，接口文档中body是json格式要添加@RequestBody，传入为DTO，业务层中对表进行修改为Entry
【并且添加修改时间与修改人id】进行之前禁用写的扩展SQL语句

添加了关于菜品分类模块的3层次代码实现了如下接口
- 新增分类
- 分类分页查询
- 根据id删除分类
- 修改分类
- 启用禁用分类
- 根据类型查询分类

###### 3.4

